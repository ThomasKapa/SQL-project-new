-- SQL PROJECT

	CREATE TABLE PROPERTY (
		PROPERTYID INT PRIMARY KEY NOT NULL,
		PROPERTYTYPE VARCHAR(100) NOT NULL,
		LOCATION VARCHAR(100) NOT NULL,
		ADDRESS VARCHAR(100) NOT NULL,
		CITY VARCHAR(100) NOT NULL,
		ZIPCODE INT NOT NULL,
		SQUAREMETERS INT NOT NULL,
		ROOMS INT NOT NULL,
		FEATURES VARCHAR(100) NOT NULL,
		STATUS ENUM ('AVAILABLE', 'SOLD', 'RENTED') NOT NULL,
		PRICE DOUBLE NOT NULL
  );
  
	CREATE TABLE CLIENT (
		CLIENTID INT PRIMARY KEY NOT NULL,
		CLIENTTYPE ENUM('BUYER', 'SELLER', 'RENTER', 'LANDLORD'),
		NAME VARCHAR(100) NOT NULL,
		SURNAME VARCHAR(100) NOT NULL,
		PHONE VARCHAR(20) NOT NULL,
		EMAIL VARCHAR(100) NOT NULL,
		ADDRESS VARCHAR(100) NOT NULL,
		PREFEREDLOCATION VARCHAR(100) NOT NULL,
		PREFEREDCITY VARCHAR(100),
		PREFEREDPROPERTY VARCHAR(100),
		BUDGETMIN DOUBLE NOT NULL,
		BUDGETMAX DOUBLE NOT NULL,
		NOTES TEXT 
    );
    
    CREATE TABLE AGENT(
      AGENTID INT PRIMARY KEY NOT NULL,
      NAME VARCHAR(100) NOT NULL,
      SURNAME VARCHAR (100) NOT NULL,
      PHONE VARCHAR(20) NOT NULL,
      EMAIL VARCHAR(100) NOT NULL,
      PROPERTIESSOLD INT ,
      PROPERTIESRENTED INT,
      COMMISSION DOUBLE NOT NULL
    );
     
     -- AGENTS AND PROPERTIES
    CREATE TABLE PROPERTYMANAGEMENT(
       MANAGEMENTID INT PRIMARY KEY NOT NULL,
       AGENTID INT,
       PROPERTYID INT,
       FOREIGN KEY (AGENTID) REFERENCES AGENT(AGENTID),
       FOREIGN KEY (PROPERTYID) REFERENCES PROPERTY (PROPERTYID)
    );
      
      -- AGENTS AND CLIENTS
    CREATE TABLE CLIENTMANAGEMENT(
        CASEID INT PRIMARY KEY  NOT NULL,
        AGENTID INT NOT NULL,
        CLIENTID INT NOT NULL,
        FOREIGN KEY (AGENTID) REFERENCES AGENT(AGENTID),
        FOREIGN KEY (CLIENTID) REFERENCES CLIENT (CLIENTID)
    );
       
    CREATE TABLE TRANSACTIONS(
        TRANSACTIONID INT PRIMARY KEY NOT NULL,
        TRANSACTIONTYPE ENUM ('SALE', 'RENTAL') NOT NULL,
        PROPERTYID INT NOT NULL,
        CLIENTID INT NOT NULL,
        AGENTID INT NOT NULL,
        SALEPRICE DOUBLE,
        RENTALPRICE DOUBLE,
        COMMISSION DOUBLE NOT NULL,
        PAYMENTSCHEDULE VARCHAR(100),
        STATUS ENUM ('IN-PROGRESS', 'COMPLETED', 'CANCELED'),
        FOREIGN KEY (PROPERTYID) REFERENCES PROPERTY (PROPERTYID),
        FOREIGN KEY (CLIENTID) REFERENCES CLIENT (CLIENTID),
        FOREIGN KEY (AGENTID) REFERENCES AGENT (AGENTID)
        );
         
